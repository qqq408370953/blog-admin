webpackJsonp([12],{JAnN:function(t,e){},ikwf:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:function(){return{url:"",tableData:[],cur_page:1,multipleSelection:[],select_cate:"",select_word:"",del_list:[],is_search:!1,editVisible:!1,delVisible:!1,form:{name:"",date:"",address:""},token:JSON.parse(sessionStorage.getItem("token")),page:"",limit:"",total:"",pageInfo:{first:0,before:0,current:0,last:0,next:0,total_pages:0},is_off:"",source_type:"",tag:"",title:"",ConstellationData:[],emptytext:"暂无数据"}},created:function(){this.getData({}),this.getConstellationData()},watch:{$route:function(t,e){this.getData({})}},methods:{getConstellationData:function(){var t=this;this.$axios.post(this.baseURL+"/astrolabe/constellation",{token:this.token}).then(function(e){var a=e.data.data;0==a.code?t.ConstellationData=a.info:t.ConstellationData=[]})},handleSelectionChange:function(t){this.multipleSelection=t},handleCurrentChange:function(t){this.cur_page=t,this.getData({})},changeStatus:function(t){var e={token:this.token,id:t.id};e.is_off="0"==t.is_off?"0":"1";var a=this;this.$axios.post(this.baseURL+"/news/status",e).then(function(t){var e=t.data.data;0==e.code?a.$message.success("状态修改成功！"):a.$message.error("状态修改失败！"+e.msg),a.getData({})})},handleTop:function(t){var e={token:this.token,id:t.id};e.is_top="0"==t.is_top?"1":"0";var a=this;this.$axios.post(this.baseURL+"/news/top",e).then(function(t){var e=t.data.data;0==e.code?a.$message.success("修改成功！"):a.$message.error("修改失败！"+e.msg),a.getData({})})},getData:function(t){var e=this;t.page=this.cur_page,t.limit=this.limit,t.token=this.token,t.source_type=this.source_type,t.is_off=this.is_off,t.tag=this.tag,t.title=this.title,this.$axios.post(this.baseURL+"/news/list",t).then(function(t){var a=t.data.data;if(0==a.code){e.tableData=a.info.items;var s={first:a.info.first,before:a.info.before,current:a.info.current,last:a.info.last,next:a.info.next,total_pages:a.info.total_pages,total_items:a.info.total_items,limit:a.info.limit};e.pageInfo=s}else e.tableData=[],e.emptytext=a.msg})},search:function(){this.getData({})},formatter:function(t,e){return t.address},filterTag:function(t,e){return e.tag===t},handleEdit:function(t){this.$router.push({path:"editnewscontainer",query:{id:t.id,source_type:t.source_type}})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-tickets"}),t._v("内容管理\n      ")]),t._v(" "),a("el-breadcrumb-item",[t._v("星闻内容")])],1)],1),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("router-link",{staticStyle:{color:"#fff"},attrs:{to:{path:"/editnewscontainer"}}},[a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"delete",size:"small"}},[t._v("发布文章")])],1),t._v(" "),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"来源",size:"small"},model:{value:t.source_type,callback:function(e){t.source_type=e},expression:"source_type"}},[a("el-option",{key:"0",attrs:{label:"爬虫",value:"0"}}),t._v(" "),a("el-option",{key:"1",attrs:{label:"原创",value:"1"}})],1),t._v(" "),a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"状态",size:"small"},model:{value:t.is_off,callback:function(e){t.is_off=e},expression:"is_off"}},[a("el-option",{key:"0",attrs:{label:"未下架",value:"0"}}),t._v(" "),a("el-option",{key:"1",attrs:{label:"已下架",value:"1"}})],1),t._v(" "),a("el-input",{staticClass:"handle-input mr10",attrs:{size:"small",placeholder:"支持标题、发布时间搜索"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary",icon:"search"},on:{click:function(e){t.search()}}},[t._v("筛选")])],1),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","empty-text":t.emptytext},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{label:"文章",width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-card",{attrs:{"body-style":{padding:"5px",position:"relative"}}},[a("img",{staticClass:"card-image",attrs:{src:e.row.cover_page_image}}),t._v(" "),a("div",{staticClass:"card-title",attrs:{title:e.row.title}},[t._v(t._s(e.row.title))]),t._v(" "),a("div",{staticClass:"card-reading-num-left",attrs:{title:"初始阅读:"+e.row.init_viewed}},[a("span",[t._v("初始阅读:")]),t._v("\n              "+t._s(e.row.init_viewed)+"\n            ")]),t._v(" "),a("div",{staticClass:"card-reading-num-right"},[a("span",[t._v("阅读:")]),t._v("\n              0\n            ")]),t._v(" "),a("div",{staticClass:"card-time",attrs:{title:"发布时间:"+e.row.create_time}},[a("span",[t._v("发布时间:")]),t._v("\n              "+t._s(e.row.create_time)+"\n            ")])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"来源",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"==e.row.source_type?a("div",[t._v(t._s(e.row.source))]):t._e(),t._v(" "),"1"==e.row.source_type?a("div",[t._v("原创")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"设置",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-value":"0","inactive-value":"1","active-text":"上线","inactive-text":"下线"},on:{change:function(a){t.changeStatus(e.row)}},model:{value:e.row.is_off,callback:function(a){t.$set(e.row,"is_off",a)},expression:"scope.row.is_off"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"update_time",label:"更新时间",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"发布时间",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),"1"==e.row.is_top?a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){t.handleTop(e.row)}}},[t._v("已置顶")]):t._e(),t._v(" "),"0"==e.row.is_top?a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){t.handleTop(e.row)}}},[t._v("未置顶")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"prev, pager, next,jumper,total",total:t.pageInfo.total_items},on:{"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(t){a("JAnN")},"data-v-fe85cc9c",null);e.default=n.exports}});