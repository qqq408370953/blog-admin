webpackJsonp([30],{"5e8P":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){return{constellationForm:{constellation_id:"",content:""},title:"",id:"",type:"",token:JSON.parse(sessionStorage.getItem("token")),ConstellationData:[]}},methods:{onCancle:function(){this.$router.push("/constellation")},onSubmit:function(){var t=this,e=this;this.$axios.post("api/fortune/update",{token:this.token,id:this.id,type:this.type,content:this.constellationForm.content}).then(function(o){var n=o.data.data;0==n.code?(t.$message.success("保存成功！"),setTimeout(function(){e.$router.push("/constellation")},500)):t.$message.error("保存失败！"+n.msg)})},getConstellationData:function(){var t=this;this.$axios.post("api/astrolabe/constellation",{token:this.token}).then(function(e){var o=e.data.data;0==o.code?t.ConstellationData=o.info:t.ConstellationData=[]})},getData:function(){var t=this;switch(this.id=this.$route.query.id,this.type=this.$route.query.type,this.type){case"1":this.title="今日运势";break;case"2":this.title="本周运势";break;case"3":this.title="本月运势";break;case"4":this.title="本年运势"}this.$axios.post("api/fortune/info",{token:this.token,type:this.type,id:this.id}).then(function(e){var o=e.data.data;0==o.code?t.constellationForm=o.info:t.constellationForm=[]})}},created:function(){this.getConstellationData(),this.$route.query.id&&this.getData()},watch:{$route:function(t,e){this.$route.query.id&&this.getData()}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"crumbs"},[o("el-breadcrumb",{attrs:{separator:"/"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/constellation"}}},[o("i",{staticClass:"el-icon-date"}),t._v("星座运势\n      ")]),t._v(" "),o("el-breadcrumb-item",[t._v(t._s(t.title)+"编辑")])],1)],1),t._v(" "),o("div",{staticClass:"container"},[o("div",{staticClass:"form-box"},[o("el-form",{ref:"form",attrs:{model:t.constellationForm,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"星座名称"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.constellationForm.constellation_id,callback:function(e){t.$set(t.constellationForm,"constellation_id",e)},expression:"constellationForm.constellation_id"}},t._l(t.ConstellationData,function(t,e){return o("el-option",{key:e,attrs:{label:t,value:e}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:t.title}},[o("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:t.constellationForm.content,callback:function(e){t.$set(t.constellationForm,"content",e)},expression:"constellationForm.content"}})],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),t._v(" "),o("el-button",{on:{click:t.onCancle}},[t._v("取消")])],1)],1)],1)])])},staticRenderFns:[]},i=o("VU/8")(n,a,!1,null,null,null);e.default=i.exports}});